{"version":3,"sources":["../node_modules/@material-ui/icons/esm/ArrowForwardIos.js","pages/AnalyticsPage/AnalyticsInfo.tsx","pages/AnalyticsPage/AnalyticsLiquidityChart.tsx","pages/AnalyticsPage/AnalyticsVolumeChart.tsx","pages/AnalyticsPage/AnalyticsOverview.tsx"],"names":["createSvgIcon","React","d","AnalyticsInfo","data","t","useTranslation","Box","mr","pairCount","toLocaleString","oneDayTxns","oneDayVolumeUSD","GlobalConst","utils","FEEPERCENT","dayjs","extend","utc","AnalyticsLiquidityChart","globalData","useGlobalData","useState","analyticChart","ONE_MONTH_CHART","durationIndex","setDurationIndex","globalChartData","updateGlobalChartData","useEffect","a","getChartData","ALL_CHART","getChartStartTime","newChartData","chartData","getLimitedData","CHART_COUNT","fetchChartData","liquidityPercentClass","getPriceClass","Number","liquidityChangeUSD","yAxisValues","useMemo","dailyVolumes","map","value","totalLiquidityUSD","minVolume","Math","floor","min","maxVolume","ceil","max","values","step","i","push","className","typeTexts","GlobalData","analytics","CHART_DURATION_TEXTS","chartTypes","CHART_DURATIONS","chartType","setChartType","mt","formatCompact","ml","height","px","borderRadius","my","Skeleton","variant","width","format","dates","date","categories","getChartDates","AnalyticsVolumeChart","volumeTypes","volumeTypeTexts","volumeIndex","setVolumeIndex","selectedVolumeIndex","setSelectedVolumeIndex","newWeeklyData","dayItems","weekItems","day","week","liquidityWeeks","forEach","ind","month","formatDateFromTimeStamp","THREE_MONTH_CHART","dateStr","getVolumePercent","volumeData","length","currentVolumeIndex","currentVolumeData","prevVolumeData","currentVolume","prevVolume","weeklyVolumeUSD","dailyVolumeUSD","weeklyVolumeChange","volumeChangeUSD","volumeDates","weekStart","weekEnd","barChartData","volumePercentClass","flex","oneWeekVolume","onHover","onMouseLeave","AnalyticsOverview","history","useHistory","updateGlobalData","topTokens","updateTopTokens","topPairs","updateTopPairs","ethPrice","useEthPrice","price","oneDayPrice","getGlobalData","then","getTopTokens","ANALYTICS_TOKENS_COUNT","getTopPairs","ANALYTICS_PAIRS_COUNT","pairs","formattedPairs","pair","id","getBulkPairData","pairData","mb","Grid","container","spacing","item","xs","sm","md","onClick","ArrowForwardIos","showPagination"],"mappings":"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","file":"static/js/15.74a3435a.chunk.js","sourcesContent":["import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5.88 4.12L13.76 12l-7.88 7.88L8 22l10-10L8 2z\"\n}), 'ArrowForwardIos');","import React from 'react';\r\nimport { Box } from '@material-ui/core';\r\nimport { GlobalConst } from 'constants/index';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\ninterface AnalyticsInfoProps {\r\n  data: any;\r\n}\r\n\r\nconst AnalyticsInfo: React.FC<AnalyticsInfoProps> = ({ data }) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <>\r\n      <Box mr={5}>\r\n        <small>\r\n          {t('pairs')}: {data.pairCount.toLocaleString()}\r\n        </small>\r\n      </Box>\r\n      <Box mr={5}>\r\n        <small>\r\n          {t('24hTxs')}: {data.oneDayTxns.toLocaleString()}\r\n        </small>\r\n      </Box>\r\n      <Box>\r\n        <small>\r\n          {t('24hFees')}: $\r\n          {(\r\n            data.oneDayVolumeUSD * GlobalConst.utils.FEEPERCENT\r\n          ).toLocaleString()}\r\n        </small>\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AnalyticsInfo;\r\n","import React, { useEffect, useState, useMemo } from 'react';\r\nimport { Box } from '@material-ui/core';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport dayjs from 'dayjs';\r\nimport utc from 'dayjs/plugin/utc';\r\nimport { useGlobalData } from 'state/application/hooks';\r\nimport {\r\n  formatCompact,\r\n  getChartData,\r\n  getPriceClass,\r\n  getChartDates,\r\n  getChartStartTime,\r\n  getLimitedData,\r\n} from 'utils';\r\nimport { GlobalConst, GlobalData } from 'constants/index';\r\nimport { AreaChart, ChartType } from 'components';\r\nimport { useTranslation } from 'react-i18next';\r\ndayjs.extend(utc);\r\n\r\nconst AnalyticsLiquidityChart: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const { globalData } = useGlobalData();\r\n  const [durationIndex, setDurationIndex] = useState(\r\n    GlobalConst.analyticChart.ONE_MONTH_CHART,\r\n  );\r\n  const [globalChartData, updateGlobalChartData] = useState<any[] | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchChartData = async () => {\r\n      updateGlobalChartData(null);\r\n      const [newChartData] = await getChartData(\r\n        durationIndex === GlobalConst.analyticChart.ALL_CHART\r\n          ? 0\r\n          : getChartStartTime(durationIndex),\r\n      );\r\n      if (newChartData) {\r\n        const chartData = getLimitedData(\r\n          newChartData,\r\n          GlobalConst.analyticChart.CHART_COUNT,\r\n        );\r\n        updateGlobalChartData(chartData);\r\n      }\r\n    };\r\n    fetchChartData();\r\n  }, [updateGlobalChartData, durationIndex]);\r\n\r\n  const liquidityPercentClass = getPriceClass(\r\n    globalData ? Number(globalData.liquidityChangeUSD) : 0,\r\n  );\r\n\r\n  const yAxisValues = useMemo(() => {\r\n    if (globalChartData) {\r\n      const dailyVolumes: number[] = globalChartData.map((value: any) =>\r\n        Number(value.totalLiquidityUSD),\r\n      );\r\n      // this is for defining the scale for the liquidity values to present in graph. Liquidity values are more than 100M so set the min and max amount with rounding after dividing into 20000000 to show all liquidity values into the graph\r\n      const minVolume =\r\n        Math.floor(Math.min(...dailyVolumes) / 20000000) * 20000000;\r\n      const maxVolume =\r\n        Math.ceil(Math.max(...dailyVolumes) / 20000000) * 20000000;\r\n      const values = [];\r\n      // show 10 values in the y axis of the graph\r\n      const step = (maxVolume - minVolume) / 10;\r\n      for (let i = maxVolume; i >= minVolume; i -= step) {\r\n        values.push(i);\r\n      }\r\n      return values;\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }, [globalChartData]);\r\n\r\n  return (\r\n    <>\r\n      <Box className='flex justify-between'>\r\n        <span className='text-disabled text-bold text-uppercase'>\r\n          {t('liquidity')}\r\n        </span>\r\n        <ChartType\r\n          typeTexts={GlobalData.analytics.CHART_DURATION_TEXTS}\r\n          chartTypes={GlobalData.analytics.CHART_DURATIONS}\r\n          chartType={durationIndex}\r\n          setChartType={setDurationIndex}\r\n        />\r\n      </Box>\r\n      {globalData ? (\r\n        <Box mt={0.5} className='flex items-center'>\r\n          <h5>${formatCompact(globalData.totalLiquidityUSD)}</h5>\r\n          <Box\r\n            ml={1}\r\n            height={23}\r\n            px={1}\r\n            borderRadius={40}\r\n            className={liquidityPercentClass}\r\n          >\r\n            <span>\r\n              {`${globalData.liquidityChangeUSD > 0 ? '+' : ''}\r\n                      ${globalData.liquidityChangeUSD.toLocaleString()}`}\r\n              %\r\n            </span>\r\n          </Box>\r\n        </Box>\r\n      ) : (\r\n        <Box my={0.5}>\r\n          <Skeleton variant='rect' width='100%' height={24} />\r\n        </Box>\r\n      )}\r\n      <Box>\r\n        <span className='text-disabled'>\r\n          {dayjs.utc().format('MMM DD, YYYY')}\r\n        </span>\r\n      </Box>\r\n      <Box mt={2}>\r\n        {globalChartData ? (\r\n          <AreaChart\r\n            data={globalChartData.map((value: any) =>\r\n              Number(value.totalLiquidityUSD),\r\n            )}\r\n            yAxisValues={yAxisValues}\r\n            dates={globalChartData.map((value: any) => value.date)}\r\n            width='100%'\r\n            height={250}\r\n            categories={getChartDates(globalChartData, durationIndex)}\r\n          />\r\n        ) : (\r\n          <Skeleton variant='rect' width='100%' height={223} />\r\n        )}\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AnalyticsLiquidityChart;\r\n","import React, { useState, useEffect, useMemo } from 'react';\r\nimport { Box } from '@material-ui/core';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { useGlobalData } from 'state/application/hooks';\r\nimport {\r\n  formatCompact,\r\n  getChartData,\r\n  formatDateFromTimeStamp,\r\n  getPriceClass,\r\n  getChartDates,\r\n  getChartStartTime,\r\n  getLimitedData,\r\n} from 'utils';\r\nimport { BarChart, ChartType } from 'components';\r\nimport { GlobalConst, GlobalData } from 'constants/index';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst DAY_VOLUME = 0;\r\nconst WEEK_VOLUME = 1;\r\n\r\nconst AnalyticsVolumeChart: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const volumeTypes = [DAY_VOLUME, WEEK_VOLUME];\r\n  const volumeTypeTexts = [t('dayAbb'), t('weekAbb')];\r\n  const [volumeIndex, setVolumeIndex] = useState(DAY_VOLUME);\r\n  const [durationIndex, setDurationIndex] = useState(\r\n    GlobalConst.analyticChart.ONE_MONTH_CHART,\r\n  );\r\n  const [selectedVolumeIndex, setSelectedVolumeIndex] = useState(-1);\r\n  const { globalData } = useGlobalData();\r\n  const [globalChartData, updateGlobalChartData] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchChartData = async () => {\r\n      updateGlobalChartData(null);\r\n      const [newChartData, newWeeklyData] = await getChartData(\r\n        durationIndex === GlobalConst.analyticChart.ALL_CHART\r\n          ? 0\r\n          : getChartStartTime(durationIndex),\r\n      );\r\n      if (newChartData && newWeeklyData) {\r\n        const dayItems = getLimitedData(\r\n          newChartData,\r\n          GlobalConst.analyticChart.CHART_COUNT,\r\n        );\r\n        const weekItems = getLimitedData(\r\n          newWeeklyData,\r\n          GlobalConst.analyticChart.CHART_COUNT,\r\n        );\r\n        updateGlobalChartData({ day: dayItems, week: weekItems });\r\n      }\r\n    };\r\n    fetchChartData();\r\n  }, [updateGlobalChartData, durationIndex]);\r\n\r\n  const liquidityWeeks = useMemo(() => {\r\n    if (globalChartData) {\r\n      const dates: string[] = [];\r\n      globalChartData.week.forEach((value: any, ind: number) => {\r\n        const month = formatDateFromTimeStamp(Number(value.date), 'MMM');\r\n        const monthLastDate =\r\n          ind > 0\r\n            ? formatDateFromTimeStamp(\r\n                Number(globalChartData.week[ind - 1].date),\r\n                'MMM',\r\n              )\r\n            : '';\r\n        if (monthLastDate !== month) {\r\n          dates.push(month);\r\n        }\r\n        if (\r\n          durationIndex === GlobalConst.analyticChart.ONE_MONTH_CHART ||\r\n          durationIndex === GlobalConst.analyticChart.THREE_MONTH_CHART\r\n        ) {\r\n          const dateStr = formatDateFromTimeStamp(Number(value.date), 'D');\r\n          if (Number(dateStr) % 2 === 0) {\r\n            //Select dates(one date per 2 weeks) for x axis values of volume chart on week mode\r\n            dates.push(dateStr);\r\n          }\r\n        }\r\n      });\r\n      return dates;\r\n    } else {\r\n      return [];\r\n    }\r\n  }, [globalChartData, durationIndex]);\r\n\r\n  const getVolumePercent = (volumeIndex: number) => {\r\n    if (globalChartData && selectedVolumeIndex > 0) {\r\n      const volumeDataArr = [globalChartData.day, globalChartData.week];\r\n      const volumeData = volumeDataArr[volumeIndex];\r\n      if (!volumeData || volumeData.length <= 1) return 0;\r\n      const currentVolumeIndex = Math.min(\r\n        selectedVolumeIndex,\r\n        volumeData.length - 1,\r\n      );\r\n      const currentVolumeData = volumeData[currentVolumeIndex];\r\n      const prevVolumeData = volumeData[currentVolumeIndex - 1];\r\n      let currentVolume = 0;\r\n      let prevVolume = 0;\r\n      switch (volumeIndex) {\r\n        case WEEK_VOLUME:\r\n          currentVolume = currentVolumeData.weeklyVolumeUSD;\r\n          prevVolume = prevVolumeData.weeklyVolumeUSD;\r\n          break;\r\n        case DAY_VOLUME:\r\n          currentVolume = currentVolumeData.dailyVolumeUSD;\r\n          prevVolume = prevVolumeData.dailyVolumeUSD;\r\n          break;\r\n      }\r\n      if (prevVolume <= 0) return 0;\r\n      return (currentVolume / prevVolume) * 100 - 100;\r\n    } else if (globalData && selectedVolumeIndex === -1) {\r\n      switch (volumeIndex) {\r\n        case WEEK_VOLUME:\r\n          return globalData.weeklyVolumeChange;\r\n        case DAY_VOLUME:\r\n          return globalData.volumeChangeUSD;\r\n        default:\r\n          return 0;\r\n      }\r\n    } else {\r\n      return 0;\r\n    }\r\n  };\r\n\r\n  const volumeDates = useMemo(() => {\r\n    if (selectedVolumeIndex > -1) {\r\n      if (volumeIndex === DAY_VOLUME) {\r\n        return formatDateFromTimeStamp(\r\n          Number(globalChartData.day[selectedVolumeIndex].date),\r\n          'MMM DD, YYYY',\r\n        );\r\n      } else {\r\n        const weekStart = formatDateFromTimeStamp(\r\n          Number(\r\n            globalChartData.week[Math.max(0, selectedVolumeIndex - 1)].date,\r\n          ),\r\n          'MMM DD, YYYY',\r\n          selectedVolumeIndex > 0 ? 1 : -6,\r\n        );\r\n        const weekEnd = formatDateFromTimeStamp(\r\n          Number(globalChartData.week[selectedVolumeIndex].date),\r\n          'MMM DD, YYYY',\r\n        );\r\n        return `${weekStart} - ${weekEnd}`;\r\n      }\r\n    }\r\n    return '';\r\n  }, [globalChartData, selectedVolumeIndex, volumeIndex]);\r\n\r\n  const barChartData = useMemo(() => {\r\n    if (globalChartData) {\r\n      return volumeIndex === WEEK_VOLUME\r\n        ? globalChartData.week.map((value: any) => value.weeklyVolumeUSD)\r\n        : globalChartData.day.map((value: any) => value.dailyVolumeUSD);\r\n    } else {\r\n      return [];\r\n    }\r\n  }, [globalChartData, volumeIndex]);\r\n\r\n  const volumePercentClass = getPriceClass(\r\n    Number(getVolumePercent(volumeIndex)),\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Box>\r\n        <Box className='flex justify-between'>\r\n          <span className='text-disabled text-bold'>\r\n            {t('volume')} {selectedVolumeIndex === -1 ? `(${t('24hr')})` : ''}\r\n          </span>\r\n          <ChartType\r\n            chartTypes={volumeTypes}\r\n            typeTexts={volumeTypeTexts}\r\n            chartType={volumeIndex}\r\n            setChartType={setVolumeIndex}\r\n          />\r\n        </Box>\r\n        <Box mt={0.5} className='flex items-start'>\r\n          {globalChartData && globalData ? (\r\n            <Box flex={1} mr={2}>\r\n              <Box className='flex items-center'>\r\n                <h5>\r\n                  $\r\n                  {formatCompact(\r\n                    selectedVolumeIndex > -1\r\n                      ? volumeIndex === DAY_VOLUME\r\n                        ? globalChartData.day[selectedVolumeIndex]\r\n                            .dailyVolumeUSD\r\n                        : globalChartData.week[selectedVolumeIndex]\r\n                            .weeklyVolumeUSD\r\n                      : volumeIndex === DAY_VOLUME\r\n                      ? globalData.oneDayVolumeUSD\r\n                      : globalData.oneWeekVolume,\r\n                  )}\r\n                </h5>\r\n                <Box\r\n                  ml={1}\r\n                  height={23}\r\n                  px={1}\r\n                  borderRadius={40}\r\n                  className={volumePercentClass}\r\n                >\r\n                  <span>\r\n                    {`${getVolumePercent(volumeIndex) > 0 ? '+' : ''}\r\n                      ${getVolumePercent(volumeIndex).toLocaleString()}`}\r\n                    %\r\n                  </span>\r\n                </Box>\r\n              </Box>\r\n              <Box height={21}>\r\n                <span className='text-disabled'>{volumeDates}</span>\r\n              </Box>\r\n            </Box>\r\n          ) : (\r\n            <Box mr={2} flex={1}>\r\n              <Skeleton variant='rect' width='100%' height={24} />\r\n            </Box>\r\n          )}\r\n          <ChartType\r\n            chartTypes={GlobalData.analytics.CHART_DURATIONS}\r\n            typeTexts={GlobalData.analytics.CHART_DURATION_TEXTS}\r\n            chartType={durationIndex}\r\n            setChartType={setDurationIndex}\r\n          />\r\n        </Box>\r\n      </Box>\r\n      <Box mt={2}>\r\n        {globalChartData ? (\r\n          <BarChart\r\n            height={200}\r\n            data={barChartData}\r\n            categories={\r\n              volumeIndex === WEEK_VOLUME\r\n                ? liquidityWeeks\r\n                : getChartDates(globalChartData.day, durationIndex)\r\n            }\r\n            onHover={(ind) => setSelectedVolumeIndex(ind)}\r\n            onMouseLeave={() => {\r\n              setSelectedVolumeIndex(-1);\r\n            }}\r\n          />\r\n        ) : (\r\n          <Skeleton variant='rect' width='100%' height={250} />\r\n        )}\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AnalyticsVolumeChart;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Box, Grid } from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { ArrowForwardIos } from '@material-ui/icons';\r\nimport dayjs from 'dayjs';\r\nimport utc from 'dayjs/plugin/utc';\r\nimport { useEthPrice, useGlobalData } from 'state/application/hooks';\r\nimport {\r\n  getTopPairs,\r\n  getTopTokens,\r\n  getGlobalData,\r\n  getBulkPairData,\r\n} from 'utils';\r\nimport { GlobalConst } from 'constants/index';\r\nimport { TokensTable, PairTable } from 'components';\r\nimport AnalyticsInfo from './AnalyticsInfo';\r\nimport AnalyticsLiquidityChart from './AnalyticsLiquidityChart';\r\nimport AnalyticsVolumeChart from './AnalyticsVolumeChart';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\ndayjs.extend(utc);\r\n\r\nconst AnalyticsOverview: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n  const { globalData, updateGlobalData } = useGlobalData();\r\n  const [topTokens, updateTopTokens] = useState<any[] | null>(null);\r\n  const [topPairs, updateTopPairs] = useState<any[] | null>(null);\r\n  const { ethPrice } = useEthPrice();\r\n\r\n  useEffect(() => {\r\n    if (!ethPrice.price || !ethPrice.oneDayPrice) return;\r\n    getGlobalData(ethPrice.price, ethPrice.oneDayPrice).then((data) => {\r\n      if (data) {\r\n        updateGlobalData({ data });\r\n      }\r\n    });\r\n\r\n    getTopTokens(\r\n      ethPrice.price,\r\n      ethPrice.oneDayPrice,\r\n      GlobalConst.utils.ANALYTICS_TOKENS_COUNT,\r\n    ).then((data) => {\r\n      if (data) {\r\n        updateTopTokens(data);\r\n      }\r\n    });\r\n\r\n    getTopPairs(GlobalConst.utils.ANALYTICS_PAIRS_COUNT).then(async (pairs) => {\r\n      const formattedPairs = pairs\r\n        ? pairs.map((pair: any) => {\r\n            return pair.id;\r\n          })\r\n        : [];\r\n      const pairData = await getBulkPairData(formattedPairs, ethPrice.price);\r\n      if (pairData) {\r\n        updateTopPairs(pairData);\r\n      }\r\n    });\r\n  }, [updateGlobalData, ethPrice.price, ethPrice.oneDayPrice]);\r\n\r\n  return (\r\n    <Box width='100%' mb={3}>\r\n      <Grid container spacing={4}>\r\n        <Grid item xs={12} sm={12} md={6}>\r\n          <Box className='panel' width={1}>\r\n            <AnalyticsLiquidityChart />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} sm={12} md={6}>\r\n          <Box className='analyticsVolumeChart panel'>\r\n            <AnalyticsVolumeChart />\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={4}>\r\n        <Box className='panel flex flex-wrap'>\r\n          {globalData ? (\r\n            <AnalyticsInfo data={globalData} />\r\n          ) : (\r\n            <Skeleton width='100%' height={20} />\r\n          )}\r\n        </Box>\r\n      </Box>\r\n      <Box mt={4}>\r\n        <Box className='flex justify-between items-center'>\r\n          <Box className='headingWrapper'>\r\n            <p className='weight-600'>{t('topTokens')}</p>\r\n          </Box>\r\n          <Box\r\n            className='headingWrapper cursor-pointer'\r\n            onClick={() => history.push(`/analytics/tokens`)}\r\n          >\r\n            <p className='weight-600'>{t('seeAll')}</p>\r\n            <ArrowForwardIos />\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n      <Box mt={3} className='panel'>\r\n        {topTokens ? (\r\n          <TokensTable data={topTokens} showPagination={false} />\r\n        ) : (\r\n          <Skeleton variant='rect' width='100%' height={150} />\r\n        )}\r\n      </Box>\r\n      <Box mt={4}>\r\n        <Box className='flex items-center justify-between'>\r\n          <Box className='headingWrapper'>\r\n            <p className='weight-600'>{t('topPairs')}</p>\r\n          </Box>\r\n          <Box\r\n            className='headingWrapper cursor-pointer'\r\n            onClick={() => history.push(`/analytics/pairs`)}\r\n          >\r\n            <p className='weight-600'>{t('seeAll')}</p>\r\n            <ArrowForwardIos />\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n      <Box mt={3} className='panel'>\r\n        {topPairs ? (\r\n          <PairTable data={topPairs} showPagination={false} />\r\n        ) : (\r\n          <Skeleton variant='rect' width='100%' height={150} />\r\n        )}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default AnalyticsOverview;\r\n"],"sourceRoot":""}